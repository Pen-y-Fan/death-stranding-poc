# Death Stranding PoC

Progress tracker for Death Stranding

## Purpose

The purpose of the death standing tracker is to track all deliveries with the aim to help make all 540 in the game!

Once complete this project will be available at https://pen-y-fan.github.io/death-stranding-poc.

### Dashboard

The dashboard displays graphs for every location in the game. This makes it easier to identify locations to target, such
as locations with a low delivery count. Later in the game its easy to identify locations with orders and complete
locations.

### Deliveries

If any mistakes are made while taking an order the delivery can be edited. It is best to search by order number.

### Locations

When making multiple deliveries or collections from a location it can be useful to search by location and then switch
between deliveries to and from the location.

### Orders

This is the main screen to search, take and make deliveries by order. Orders can also be taken and made in bulk using
the

## Roadmap

I want to expand the PoC for Death stranding, to include:

- A table of orders
- A table of deliveries

The only data structure with mutable data is the delivery, which is related to an order, and the order is related to a
client and destination. The delivery data should be persisted to local storage.

## Tech stack

- Rust compile to WASM
- Able to run locally with web browser server
- Able to deploy to GitHub page

## Requirements

- Table displaying five orders (static content - possible JSON or similar)
- When the web app is started local storage is checked and initialised )more details late)
- Button to take an order for delivery
- When the button is chosen a delivery is created
- The button to tank and order is hidden
- A button to deliver and order displays
- The current state of deliveries is saved to local storage
- When the web app is restarted it reads the deliveries from storage
- When the project is pushed to GitHub main (after a PR), a GutHub action will build the project and be available as a
  GitHub Page (static page with WASM and local storage for persistence)

## Local dev environment

- IDE: RustRover by JetBrains
- macOS with Homebrew
- Rust toolchain installed (rustup, cargo)

## Quickstart (Web build and local run)

See docs/manual-user.md and docs/description.md for detailed usage and domain context.

1. Install prerequisites:
    - rustup target add wasm32-unknown-unknown
    - cargo install wasm-pack
    - Optional local server: cargo install basic-http-server
2. Build for web:
    - wasm-pack build --target web --release
3. Serve the project root (so ./index.html can find ./pkg):
    - basic-http-server .
    - then open http://127.0.0.1:4000

## Testing

- Run native tests:

```shell
cargo test
```

- Optional WASM tests (headless in browser):

```shell
rustup target add wasm32-unknown-unknown
wasm-pack test --headless --chrome
```

## Deployment (GitHub Pages)

- The GitHub Actions workflow builds via wasm-pack and publishes docs/ with pkg/ + index.html.
- Manual setup: in your repository Settings → Pages, set Source to GitHub Actions.

## WASM API (brief)

Exposed functions (when compiled for wasm32):
- initialize()
- import_districts(json), import_locations(json), import_delivery_categories(json), import_orders(json), import_deliveries(json)
- export_deliveries() -> String (JSON)
- get_districts() -> String, get_locations() -> String, get_location(id) -> String, get_district(id) -> String, get_delivery_categories() -> String, get_orders() -> String
- take_order(number), store_delivery(number, location_id, comment?), continue_delivery(number, comment?), make_delivery(number), fail_delivery(number, comment?), lose_delivery(number, comment?)
- bulk_accept(numbers[]), bulk_complete(numbers[])
- query_orders(filter_json, page, per_page, sort_key, sort_dir, search) -> String
- get_dashboard_summary() -> String

## Notes

- Data directory: data/ at the project root. These JSON files are loaded by tests and optionally by the web app at
  runtime.
- Deployment: The GitHub Actions workflow copies data/ into docs/ alongside pkg/ and index.html so the files are
  available at /data/... on GitHub Pages.
- index.html imports ./pkg/death_stranding_poc.js which is generated by wasm-pack.
- Deliveries are persisted to browser localStorage; native builds noop those code paths behind cfg(target_arch = "
  wasm32").
- Timestamps: stored in ISO 8601 UTC; UI should present in Europe/London by default (or user’s TZ).
- Pinned dependency versions: wasm-bindgen 0.2.92, web-sys 0.3.78, serde 1.0.210, serde_json 1.0.128. To upgrade: bump
  versions in Cargo.toml keeping wasm-bindgen/web-sys on compatible pairs, then run `cargo update` and validate with
  `wasm-pack build` and `cargo test`.

## Contributing

This is a **personal project**. Contributions are **not** required. Anyone interested in developing this project are
welcome to fork or clone for your own use.

## Credits

- [Michael Pritchard \(AKA Pen-y-Fan\)](https://github.com/pen-y-fan) original project

## License

MIT License (MIT). Please see [License File](LICENSE.md) for more information.

The order data has been copied from
the [Death stranding wiki](https://deathstranding.fandom.com/wiki/Orders) and is available under
the [CC BY-SA](https://www.fandom.com/licensing) license.  
